# $NetBSD: Makefile,v 1.14 2022/01/28 12:04:17 wiz Exp $

DISTNAME=		TextTest-4.0.9
PKGNAME=		${DISTNAME:tl}
CATEGORIES=		devel python
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=texttest/}

MAINTAINER=		schmonz@NetBSD.org
HOMEPAGE=		http://texttest.sourceforge.net/
COMMENT=		Tool for text-based Approval Testing
LICENSE=		gnu-lgpl-v2.1

DEPENDS+=		${PYPKGPREFIX}-gobject3-[0-9]*:../../devel/py-gobject3
DEPENDS+=		${PYPKGPREFIX}-psutil-[0-9]*:../../sysutils/py-psutil

USE_LANGUAGES=		# none

REPLACE_PYTHON+=	texttestlib/default/batch/__init__.py
REPLACE_PYTHON+=	texttestlib/default/virtualdisplay.py

PYTHON_VERSIONS_INCOMPATIBLE=	27

SUBST_CLASSES+=		prefix
SUBST_STAGE.prefix=	pre-configure
SUBST_FILES.prefix=	texttestlib/default/__init__.py
SUBST_VARS.prefix=	PREFIX

SUBST_CLASSES+=		crlf
SUBST_STAGE.crlf=	post-extract
SUBST_FILTER_CMD.crlf=	${TR} -d '\r'
SUBST_FILES.crlf=	PKG-INFO
SUBST_FILES.crlf+=	bin/filter_fpdiff.py
SUBST_FILES.crlf+=	bin/filter_rundependent.py
SUBST_FILES.crlf+=	bin/texttest
SUBST_FILES.crlf+=	bin/texttest_release.py
SUBST_FILES.crlf+=	texttestlib/plugins.py
SUBST_FILES.crlf+=	texttestlib/libexec/startXvfb.py
SUBST_FILES.crlf+=	texttestlib/libexec/sitecustomize.py
SUBST_FILES.crlf+=	texttestlib/libexec/startWindowManager.py
SUBST_FILES.crlf+=	texttestlib/libexec/interpretcore
SUBST_FILES.crlf+=	texttestlib/queuesystem/slavejobs.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/gridqueuesystem.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/__init__.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/sge.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/abstractqueuesystem.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/masterprocess.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/condor.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/utils.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/lsf.py
SUBST_FILES.crlf+=	texttestlib/queuesystem/ec2cloud.py
SUBST_FILES.crlf+=	texttestlib/testmodel.py
SUBST_FILES.crlf+=	texttestlib/logconfiggen.py
SUBST_FILES.crlf+=	texttestlib/etc/default_gui.uimap
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-view_program-dynamic.xml
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-use_case_record_mode-static.xml
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-static.xml
SUBST_FILES.crlf+=	texttestlib/etc/git.xml
SUBST_FILES.crlf+=	texttestlib/etc/bzr.xml
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-use_case_record_mode-dynamic.xml
SUBST_FILES.crlf+=	texttestlib/etc/rsync_exclude_patterns
SUBST_FILES.crlf+=	texttestlib/etc/default_gui.xml
SUBST_FILES.crlf+=	texttestlib/etc/sge.xml
SUBST_FILES.crlf+=	texttestlib/etc/cvs.xml
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-dynamic.xml
SUBST_FILES.crlf+=	texttestlib/etc/.gtkrc-2.0
SUBST_FILES.crlf+=	texttestlib/etc/capturemock_config
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-unordered_text-dynamic.xml
SUBST_FILES.crlf+=	texttestlib/etc/default_gui-view_program.xml
SUBST_FILES.crlf+=	texttestlib/etc/hg.xml
SUBST_FILES.crlf+=	texttestlib/etc/summary_template.html
SUBST_FILES.crlf+=	texttestlib/default/runtest.py
SUBST_FILES.crlf+=	texttestlib/default/console.py
SUBST_FILES.crlf+=	texttestlib/default/reconnect.py
SUBST_FILES.crlf+=	texttestlib/default/rundependent.py
SUBST_FILES.crlf+=	texttestlib/default/comparetest.py
SUBST_FILES.crlf+=	texttestlib/default/actionrunner.py
SUBST_FILES.crlf+=	texttestlib/default/__init__.py
SUBST_FILES.crlf+=	texttestlib/default/storytext_interface.py
SUBST_FILES.crlf+=	texttestlib/default/colorer.py
SUBST_FILES.crlf+=	texttestlib/default/sandbox.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/bugzilla.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/bugzillav2.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/__init__.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/jira.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/github.py
SUBST_FILES.crlf+=	texttestlib/default/knownbugs/trac.py
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/commentliststyle.css
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/comment.js
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/comment.php
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/filter.js
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/commentlist.js
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview_javascript/jquery.js
SUBST_FILES.crlf+=	texttestlib/default/batch/HTMLgen.py
SUBST_FILES.crlf+=	texttestlib/default/batch/junitreport.py
SUBST_FILES.crlf+=	texttestlib/default/batch/HTMLcolors.py
SUBST_FILES.crlf+=	texttestlib/default/batch/__init__.py
SUBST_FILES.crlf+=	texttestlib/default/batch/jenkinschanges.py
SUBST_FILES.crlf+=	texttestlib/default/batch/testoverview.py
SUBST_FILES.crlf+=	texttestlib/default/batch/imgsize.py
SUBST_FILES.crlf+=	texttestlib/default/batch/summarypages.py
SUBST_FILES.crlf+=	texttestlib/default/batch/resultgraphs.py
SUBST_FILES.crlf+=	texttestlib/default/batch/batchutils.py
SUBST_FILES.crlf+=	texttestlib/default/traffic.py
SUBST_FILES.crlf+=	texttestlib/default/scripts.py
SUBST_FILES.crlf+=	texttestlib/default/comparefile.py
SUBST_FILES.crlf+=	texttestlib/default/performance.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/statusviews.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/guiplugins.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/stockitems.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/textinfo.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/filetrees.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/git.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/custom_widgets_storytext.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/bzr.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/custom_widgets.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/__init__.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/cvs.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/version_control/hg.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/entrycompletion.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/testtree.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/selectandfilter.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/runningactions.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/adminactions.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/helpdialogs.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/__init__.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/fileproperties.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/fileviewers.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/housekeeping.py
SUBST_FILES.crlf+=	texttestlib/default/gtkgui/default_gui/changeteststate.py
SUBST_FILES.crlf+=	texttestlib/default/virtualdisplay.py
SUBST_FILES.crlf+=	texttestlib/default/fpdiff.py
SUBST_FILES.crlf+=	texttestlib/jobprocess.py
SUBST_FILES.crlf+=	texttestlib/engine.py
SUBST_FILES.crlf+=	texttestlib/utils.py
SUBST_FILES.crlf+=	texttestlib/log/regenerate_log_config.py
SUBST_FILES.crlf+=	texttestlib/log/logconfiggen_setup.py
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_2.x
SUBST_FILES.crlf+=	texttestlib/doc/quick_start.txt
SUBST_FILES.crlf+=	texttestlib/doc/ChangeLog
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.1
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.6
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.8
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.9
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.7
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.12
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.24
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.22
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.25
SUBST_FILES.crlf+=	texttestlib/doc/CREDITS.txt
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.5
SUBST_FILES.crlf+=	texttestlib/doc/LICENSE.txt
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.3
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.4
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.29
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.16
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.20
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.18
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.27
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.19
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.21
SUBST_FILES.crlf+=	texttestlib/doc/MigrationNotes_from_3.17
SUBST_FILES.crlf+=	texttestlib/texttest_version.py
SUBST_FILES.crlf+=	setup.py
SUBST_FILES.crlf+=	readme.txt

.include "../../lang/python/egg.mk"
.include "../../lang/python/application.mk"
.include "../../x11/gtk3/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
